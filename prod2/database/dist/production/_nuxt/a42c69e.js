(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{688:function(t,e,r){"use strict";r(11),r(9),r(15),r(5),r(16),r(8),r(17);var n=r(1),o=(r(33),r(262),r(263),r(689),r(133)),c=r(694),l=r(103),f=r(12);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(f.a)(c.a,l.a,o.a).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return h(h({"v-card":!0},l.a.options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},o.a.options.computed.classes.call(this))},styles:function(){var style=h({},o.a.options.computed.styles.call(this));return this.img&&(style.background='url("'.concat(this.img,'") center center / cover no-repeat')),style}},methods:{genProgress:function(){var t=c.a.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render:function(t){var e=this.generateRouteLink(),r=e.tag,data=e.data;return data.style=this.styles,this.isClickable&&(data.attrs=data.attrs||{},data.attrs.tabindex=0),t(r,this.setBackgroundColor(this.color,data),[this.genProgress(),this.$slots.default])}})},697:function(t,e,r){"use strict";r(9),r(15),r(16),r(17);var n=r(1),o=(r(5),r(33),r(11),r(32),r(67),r(369),r(49),r(370),r(371),r(372),r(373),r(374),r(375),r(376),r(377),r(378),r(379),r(380),r(381),r(382),r(57),r(48),r(8),r(91),r(368),r(2)),c=r(102),l=r(0);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=["sm","md","lg","xl"],m=h.reduce((function(t,e){return t[e]={type:[Boolean,String,Number],default:!1},t}),{}),v=h.reduce((function(t,e){return t["offset"+Object(l.G)(e)]={type:[String,Number],default:null},t}),{}),y=h.reduce((function(t,e){return t["order"+Object(l.G)(e)]={type:[String,Number],default:null},t}),{}),S={col:Object.keys(m),offset:Object.keys(v),order:Object.keys(y)};function _(t,e,r){var n=t;if(null!=r&&!1!==r){if(e){var o=e.replace(t,"");n+="-".concat(o)}return"col"!==t||""!==r&&!0!==r?(n+="-".concat(r)).toLowerCase():n.toLowerCase()}}var O=new Map;e.a=o.default.extend({name:"v-col",functional:!0,props:d(d(d(d({cols:{type:[Boolean,String,Number],default:!1}},m),{},{offset:{type:[String,Number],default:null}},v),{},{order:{type:[String,Number],default:null}},y),{},{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,e){var r=e.props,data=e.data,o=e.children,l=(e.parent,"");for(var f in r)l+=String(r[f]);var d=O.get(l);return d||function(){var t,e;for(e in d=[],S)S[e].forEach((function(t){var n=r[t],o=_(e,t,n);o&&d.push(o)}));var o=d.some((function(t){return t.startsWith("col-")}));d.push((t={col:!o||!r.cols},Object(n.a)(t,"col-".concat(r.cols),r.cols),Object(n.a)(t,"offset-".concat(r.offset),r.offset),Object(n.a)(t,"order-".concat(r.order),r.order),Object(n.a)(t,"align-self-".concat(r.alignSelf),r.alignSelf),t)),O.set(l,d)}(),t(r.tag,Object(c.a)(data,{class:d}),o)}})},707:function(t,e,r){"use strict";r(15),r(5),r(11),r(91),r(35),r(383),r(368),r(79),r(92);var n=r(2);var o,c=r(102);e.a=(o="container",n.default.extend({name:"v-".concat(o),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,e){var r=e.props,data=e.data,n=e.children;data.staticClass="".concat(o," ").concat(data.staticClass||"").trim();var c=data.attrs;if(c){data.attrs={};var l=Object.keys(c).filter((function(t){if("slot"===t)return!1;var e=c[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}));l.length&&(data.staticClass+=" ".concat(l.join(" ")))}return r.id&&(data.domProps=data.domProps||{},data.domProps.id=r.id),t(r.tag,data,n)}})).extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var r,n=e.props,data=e.data,o=e.children,l=data.attrs;return l&&(data.attrs={},r=Object.keys(l).filter((function(t){if("slot"===t)return!1;var e=l[t];return t.startsWith("data-")?(data.attrs[t]=e,!1):e||"string"==typeof e}))),n.id&&(data.domProps=data.domProps||{},data.domProps.id=n.id),t(n.tag,Object(c.a)(data,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(r||[])}),o)}})},722:function(t,e,r){var content=r(770);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(19).default)("1577daa3",content,!0,{sourceMap:!1})},769:function(t,e,r){"use strict";r(722)},770:function(t,e,r){var n=r(18)(!1);n.push([t.i,".filter-fixed[data-v-9e420356]{position:-webkit-sticky;position:sticky;top:0;z-index:5;background-color:#fff}",""]),t.exports=n},829:function(t,e,r){"use strict";r.r(e);var n=r(233),o=r(688),c=r(697),l=r(707),f=r(826),d=r(268),h=r(235),m=r(670),v=r(683),y=r(711),S=(r(36),r(11),r(9),r(16),r(8),r(17),r(20)),_=r(1),O=(r(86),r(65),r(33),r(5),r(56),r(32),r(15),r(134)),j=r.n(O),E=r(46),x=r(4);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(_.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L={data:function(){return{filterVisible:!0,fromMenu:!1,toMenu:!1,filters:{from_date:null,to_date:null},selectedGroup:"day",selectedChart:0,groupByOptions:[{text:"Ngày",value:"day"},{text:"Tuần",value:"week"},{text:"Tháng",value:"month"},{text:"Quý",value:"quarter"},{text:"Năm",value:"year"}],chartTypes:[{name:"Biểu đồ Lợi nhuận",type:"bar"},{name:"Tỉ lệ lợi nhuận",type:"pie"},{name:"Tỉ lệ vào lệnh",type:"pie"},{name:"Biểu đồ Số lệnh",type:"bar"}],profitData:{},filteredDataCached:[],STORAGE_KEYS:{FILTERS:"home_filters",FILTER_VISIBLE:"home_filterVisible",SELECTED_GROUP:"home_selectedGroup",SELECTED_CHART:"home_selectedChart"}}},computed:k(k({},Object(E.c)({botOrderProfitSummary:"bot/botOrderProfitSummary"})),{},{chartData:function(){var data=this.filteredDataCached,t=this.selectedGroup;if(!data.length)return{series:[],options:{}};if(0===this.selectedChart){var e=data.map((function(t){return Number(t.net_profit)||0}));return{series:[{name:"Lợi nhuận (USDT)",data:e}],options:{chart:{type:"bar",height:500,zoom:{enabled:!1}},plotOptions:{bar:{distributed:!0,columnWidth:"60%"}},xaxis:{categories:data.map((function(t){return t.period})),title:{text:this.capitalize(this.selectedGroup)}},yaxis:{title:{text:"Lợi nhuận (USDT)"},labels:{formatter:function(t){return"".concat(t," USDT")}}},tooltip:{y:{formatter:function(t){return"".concat(t," USDT")}}},colors:e.map((function(t){return t>=0?"#2ecc71":"#e74c3c"})),dataLabels:{enabled:!0,formatter:function(t){return"".concat(t)}},title:{text:"Biểu đồ Lợi nhuận theo ".concat(this.capitalize(t)),align:"center"},legend:{show:!1}}}}return 1===this.selectedChart?{series:[data.reduce((function(t,e){return t+(e.net_profit>0?e.net_profit:0)}),0),Math.abs(data.reduce((function(t,e){return t+(e.net_profit<0?e.net_profit:0)}),0))],options:{labels:["Tổng Lợi nhuận","Tổng Lỗ"],title:{text:"Phân bố Lợi nhuận & Lỗ theo ".concat(this.capitalize(t)),align:"center"},legend:{position:"bottom"},colors:["#2ecc71","#e74c3c"]}}:2===this.selectedChart?{series:[data.reduce((function(t,e){return t+(e.buy_orders||0)}),0),data.reduce((function(t,e){return t+(e.sell_orders||0)}),0)],options:{labels:["Lệnh BUY","Lệnh SELL"],title:{text:"Tỉ lệ vào lệnh BUY vs SELL theo ".concat(this.capitalize(t)),align:"center"},colors:["#3498db","#e67e22"],legend:{position:"bottom"}}}:3===this.selectedChart?{series:[{name:"Lệnh thắng",data:data.map((function(t){return Number(t.win_orders)||0}))},{name:"Lệnh thua",data:data.map((function(t){return Number(t.lose_orders)||0}))}],options:{chart:{type:"bar",stacked:!0},title:{text:"Số lượng Lệnh theo ".concat(this.capitalize(t)),align:"center"},xaxis:{categories:data.map((function(t){return t.period})),title:{text:this.capitalize(t)}},yaxis:{title:{text:"Số lệnh"}},colors:["#27ae60","#c0392b"],dataLabels:{enabled:!0,formatter:function(t){return"".concat(t)}},tooltip:{y:{formatter:function(t){return"".concat(t)}}},legend:{position:"bottom"}}}:{series:[],options:{}}}}),watch:{filterVisible:function(t){this.saveLocalStorage()},selectedGroup:function(t){this.saveLocalStorage()},selectedChart:function(t){this.saveLocalStorage()}},mounted:function(){this.init()},methods:k(k({},Object(E.b)({setLoadingForm:"common/setLoadingForm",toggleSnackbar:"common/toggleSnackbar",getProfitSummary:"bot/getProfitSummary"})),{},{init:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resetFilters(),t.loadLocalStorage(),e.next=4,t.fetchSumamary();case 4:case"end":return e.stop()}}),e)})))()},fetchSumamary:function(){var t=this;return Object(S.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={start_date:t.filters.from_date||null,end_date:t.filters.to_date||null},t.setLoadingForm(!0),e.next=5,t.getProfitSummary(r);case 5:n=t.exceptionApi_checkApiResult(x.a.API_PATH.BOT_ORDER_PROFIT_SUMMARY.PATH),t.profitData=n?k({},t.botOrderProfitSummary):{},t.setLoadingForm(!1),t.saveLocalStorage(),t.applyFilters(),t.$vuetify.breakpoint.smAndDown&&(t.filterVisible=!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t.toggleSnackbar({isShow:!0,message:"Không tải được thông tin biểu đồ",color:"error"});case 16:return e.prev=16,t.setLoadingForm(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})))()},changeGroup:function(t){this.selectedGroup=t,this.applyFilters()},capitalize:function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},resetFilters:function(){this.selectedChart=0,this.selectedGroup="day",this.filters={from_date:j()().subtract(7,"days").format("YYYY-MM-DD"),to_date:j()().format("YYYY-MM-DD")},this.applyFilters()},loadLocalStorage:function(){try{var t=localStorage.getItem(this.STORAGE_KEYS.FILTERS);t&&(this.filters=JSON.parse(t));var e=localStorage.getItem(this.STORAGE_KEYS.FILTER_VISIBLE);null!==e&&(this.filterVisible="true"===e);var r=localStorage.getItem(this.STORAGE_KEYS.SELECTED_GROUP);null!==r&&(this.selectedGroup=r);var n=localStorage.getItem(this.STORAGE_KEYS.SELECTED_CHART);null!==n&&(this.selectedChart=parseInt(n))}catch(t){console.warn("Lỗi load localStorage:",t)}},applyFilters:function(){var t=this.selectedGroup,data=this.profitData[t]||[],e=this.filters.from_date?new Date(this.filters.from_date):null,r=this.filters.to_date?new Date(this.filters.to_date):null;this.filteredDataCached=data.filter((function(t){if(!t.period)return!1;if(!e&&!r)return!0;if(!function(t){return/^\d{4}-\d{2}-\d{2}$/.test(t.period)}(t))return!0;var n=new Date(t.period);return!!isNaN(n)||!(e&&n<e)&&!(r&&n>r)}))},saveLocalStorage:function(){try{localStorage.setItem(this.STORAGE_KEYS.FILTERS,JSON.stringify(this.filters)),localStorage.setItem(this.STORAGE_KEYS.FILTER_VISIBLE,this.filterVisible),localStorage.setItem(this.STORAGE_KEYS.SELECTED_GROUP,this.selectedGroup),localStorage.setItem(this.STORAGE_KEYS.SELECTED_CHART,this.selectedChart)}catch(t){}}})},C=(r(769),r(40)),component=Object(C.a)(L,(function(){var t=this,e=t._self._c;return e(l.a,{attrs:{fluid:""}},[e(o.a,{staticClass:"filter-fixed pa-4 mb-3",attrs:{flat:""}},[e("div",{staticClass:"d-flex justify-space-between align-center mb-2"},[e("span",{staticClass:"text-h6 font-weight-bold"},[t._v("Bộ lọc điều kiện")]),t._v(" "),e(n.a,{staticClass:"font-weight-bold",attrs:{color:"primary",elevation:"1",rounded:"",small:""},on:{click:function(e){t.filterVisible=!t.filterVisible}}},[e(h.a,{attrs:{left:""}},[t._v("\n          "+t._s(t.filterVisible?"mdi-chevron-up":"mdi-chevron-down")+"\n        ")]),t._v("\n        "+t._s(t.filterVisible?"Ẩn bộ lọc":"Hiện bộ lọc")+"\n      ")],1)],1),t._v(" "),e(d.a,[e("div",{directives:[{name:"show",rawName:"v-show",value:t.filterVisible,expression:"filterVisible"}]},[e(v.a,{attrs:{dense:""}},[e(c.a,{attrs:{cols:"12",md:"3"}},[e(m.a,{ref:"fromMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Từ ngày",readonly:"",dense:"",outlined:"",clearable:"","prepend-icon":"mdi-calendar","hide-details":""},model:{value:t.filters.from_date,callback:function(e){t.$set(t.filters,"from_date",e)},expression:"filters.from_date"}},"v-text-field",o,!1),n))]}}]),model:{value:t.fromMenu,callback:function(e){t.fromMenu=e},expression:"fromMenu"}},[t._v(" "),e(f.a,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.fromMenu=!1}},model:{value:t.filters.from_date,callback:function(e){t.$set(t.filters,"from_date",e)},expression:"filters.from_date"}})],1)],1),t._v(" "),e(c.a,{attrs:{cols:"12",md:"3"}},[e(m.a,{ref:"toMenu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,o=r.attrs;return[e(y.a,t._g(t._b({attrs:{label:"Đến ngày",readonly:"",dense:"",outlined:"",clearable:"","prepend-icon":"mdi-calendar","hide-details":""},model:{value:t.filters.to_date,callback:function(e){t.$set(t.filters,"to_date",e)},expression:"filters.to_date"}},"v-text-field",o,!1),n))]}}]),model:{value:t.toMenu,callback:function(e){t.toMenu=e},expression:"toMenu"}},[t._v(" "),e(f.a,{attrs:{"no-title":"",scrollable:""},on:{input:function(e){t.toMenu=!1}},model:{value:t.filters.to_date,callback:function(e){t.$set(t.filters,"to_date",e)},expression:"filters.to_date"}})],1)],1),t._v(" "),e(c.a,{staticClass:"d-flex justify-end align-center flex-wrap",class:t.$vuetify.breakpoint.smAndDown?"flex-column align-stretch":"",attrs:{cols:"12"}},[e(n.a,{attrs:{small:"",color:"grey lighten-3 ml-2 mt-3"},on:{click:t.resetFilters}},[e(h.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v(" Reset\n            ")],1),t._v(" "),e(n.a,{staticClass:"ml-2 mt-3",attrs:{color:"primary",small:""},on:{click:t.fetchSumamary}},[e(h.a,{attrs:{left:""}},[t._v("mdi-magnify")]),t._v(" Tìm kiếm\n            ")],1)],1)],1)],1)])],1),t._v(" "),e(v.a,{staticClass:"mb-4",attrs:{justify:"center"}},t._l(t.groupByOptions,(function(r){return e(n.a,{key:r.value,staticClass:"mx-1 my-1",attrs:{color:t.selectedGroup===r.value?"primary":"grey lighten-1",outlined:""},on:{click:function(e){return t.changeGroup(r.value)}}},[t._v("\n      "+t._s(r.text)+"\n    ")])})),1),t._v(" "),e(v.a,{staticClass:"mb-4",attrs:{justify:"center"}},t._l(t.chartTypes,(function(r,o){return e(n.a,{key:r.name,staticClass:"mx-1 my-1",attrs:{color:t.selectedChart===o?"primary":"grey lighten-1",outlined:""},on:{click:function(e){t.selectedChart=o}}},[t._v("\n      "+t._s(r.name)+"\n    ")])})),1),t._v(" "),e(v.a,{attrs:{justify:"center"}},[e(c.a,{staticClass:"pa-0",attrs:{cols:"12",md:"12"}},[e("client-only",[e("apexchart",{attrs:{type:t.chartTypes[t.selectedChart].type,height:"500",series:t.chartData.series,options:t.chartData.options}})],1)],1)],1)],1)}),[],!1,null,"9e420356",null);e.default=component.exports}}]);