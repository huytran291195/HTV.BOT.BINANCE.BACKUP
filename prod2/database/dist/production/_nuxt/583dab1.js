(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{731:function(t,e,n){var content=n(803);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("317b8bed",content,!0,{sourceMap:!1})},802:function(t,e,n){"use strict";n(731)},803:function(t,e,n){var o=n(18)(!1);o.push([t.i,".system-config-page[data-v-30de9d94]{min-height:100vh;position:relative;padding:20px 20px 80px}.fixed-footer[data-v-30de9d94]{position:fixed;bottom:0;left:0;width:100%;background:#fff;box-shadow:0 -2px 5px rgba(0,0,0,.1);text-align:right;padding:8px 16px;z-index:10;display:flex;justify-content:flex-end;align-items:center}.formatted-json[data-v-30de9d94]{background:#f4f4f4;padding:10px;border-radius:6px;font-size:13px;white-space:pre-wrap;font-family:monospace;color:#2c3e50;max-height:300px;overflow-y:auto}",""]),t.exports=o},837:function(t,e,n){"use strict";n.r(e);var o=n(233),r=n(688),c=n(687),l=n(697),f=n(707),d=n(699),m=n(723),h=n(235),v=n(683),y=n(681),w=n(711),x=(n(9),n(68),n(11),n(15),n(5),n(16),n(8),n(17),n(23)),S=n(85),_=n(20),O=n(1),j=(n(65),n(86),n(46)),k=n(4);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var J={name:"SystemConfigPage",data:function(){return{isEditing:!1,jsonViewerDialog:!1,formattedJsonToView:"",configList:[]}},computed:L({},Object(j.c)({botSystemConfigList:"bot/botSystemConfigList",botSystemConfigUpdate:"bot/botSystemConfigUpdate"})),mounted:function(){this.init()},methods:L(L({},Object(j.b)({setLoadingForm:"common/setLoadingForm",toggleSnackbar:"common/toggleSnackbar",login:"manager/login",getBotSystemConfigList:"bot/getBotSystemConfigList",updateBotSystemConfig:"bot/updateBotSystemConfig"})),{},{init:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadConfig();case 2:case"end":return e.stop()}}),e)})))()},loadConfig:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.setLoadingForm(!0),e.next=4,t.getBotSystemConfigList();case 4:n=t.exceptionApi_checkApiResult(k.a.API_PATH.BOT_SYSTEM_CONFIG_LIST.PATH),t.configList=n?Object(S.a)(t.botSystemConfigList):[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.toggleSnackbar({isShow:!0,message:"Không tải được cấu hình hệ thống",color:"error"});case 11:return e.prev=11,t.setLoadingForm(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},saveConfig:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.configList.map((function(t){return{key:t.key,value:t.value}})),t.setLoadingForm(!0),e.next=5,t.updateBotSystemConfig(n);case 5:t.exceptionApi_checkApiResult(k.a.API_PATH.BOT_SYSTEM_CONFIG_LIST.PATH)?(t.configList=Object(S.a)(t.botSystemConfigUpdate),t.toggleSnackbar({isShow:!0,message:"Đã lưu cấu hình",color:"success"})):t.toggleSnackbar({isShow:!0,message:"Lưu cấu hình thất bại",color:"error"}),t.isEditing=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.toggleSnackbar({isShow:!0,message:"Lưu cấu hình thất bại",color:"error"});case 13:return e.prev=13,t.setLoadingForm(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()},isJson:function(t){if(!t||"string"!=typeof t)return!1;try{var e=JSON.parse(t);return"object"===Object(x.a)(e)&&null!==e}catch(t){return!1}},formatJson:function(t){try{return JSON.stringify(JSON.parse(t),null,2)}catch(e){return t}},openJsonViewer:function(t){this.formattedJsonToView=this.formatJson(t),this.jsonViewerDialog=!0},toggleEdit:function(){this.isEditing=!this.isEditing}})},E=(n(802),n(40)),component=Object(E.a)(J,(function(){var t=this,e=t._self._c;return e(f.a,{staticClass:"system-config-page",attrs:{fluid:""}},[e("div",{staticClass:"d-flex justify-space-between align-center mb-4"},[e("span",{staticClass:"text-h6 font-weight-bold"},[t._v("Cấu hình hệ thống giao dịch")]),t._v(" "),e(o.a,{staticClass:"font-weight-bold",attrs:{color:"primary",height:"40","min-width":"40",elevation:"2",rounded:""},on:{click:t.loadConfig}},[e(h.a,{attrs:{left:""}},[t._v("mdi-refresh")]),t._v("\n      Làm mới\n    ")],1)],1),t._v(" "),e(r.a,[e(c.c,{staticStyle:{"padding-bottom":"80px"}},[e(m.a,{ref:"form"},[e(v.a,t._l(t.configList,(function(n,o){return e(l.a,{key:o,attrs:{cols:"12",md:"6"}},[e(w.a,{attrs:{label:n.key,hint:n.description,"persistent-hint":"",clearable:"",outlined:"",dense:"",disabled:!t.isEditing},scopedSlots:t._u([t.isJson(n.value)?{key:"append-outer",fn:function(){return[e(h.a,{staticClass:"mr-2",staticStyle:{cursor:"pointer"},attrs:{small:"",color:"primary",title:"Xem JSON định dạng"},on:{click:function(e){return t.openJsonViewer(n.value)}}},[t._v("\n                  mdi-eye\n                ")])]},proxy:!0}:null],null,!0),model:{value:n.value,callback:function(e){t.$set(n,"value",e)},expression:"item.value"}})],1)})),1)],1)],1)],1),t._v(" "),e("div",{staticClass:"fixed-footer d-flex justify-end align-center"},[e(o.a,{staticClass:"mr-3",attrs:{small:"",text:"",color:"primary"},on:{click:t.toggleEdit}},[e(h.a,{attrs:{left:""}},[t._v(t._s(t.isEditing?"mdi-close":"mdi-pencil"))]),t._v("\n      "+t._s(t.isEditing?"Huỷ":"Chỉnh sửa")+"\n    ")],1),t._v(" "),t.isEditing?e(o.a,{attrs:{color:"primary",disabled:!t.isEditing},on:{click:t.saveConfig}},[e(h.a,{attrs:{left:""}},[t._v("mdi-content-save")]),t._v("\n      Lưu cấu hình\n    ")],1):t._e()],1),t._v(" "),e(d.a,{attrs:{"max-width":"600px"},model:{value:t.jsonViewerDialog,callback:function(e){t.jsonViewerDialog=e},expression:"jsonViewerDialog"}},[e(r.a,[e(c.d,[t._v("JSON Viewer")]),t._v(" "),e(c.c,[e("pre",{staticClass:"formatted-json"},[t._v(t._s(t.formattedJsonToView))])]),t._v(" "),e(c.a,[e(y.a),t._v(" "),e(o.a,{attrs:{text:"",color:"primary"},on:{click:function(e){t.jsonViewerDialog=!1}}},[t._v("Đóng")])],1)],1)],1)],1)}),[],!1,null,"30de9d94",null);e.default=component.exports}}]);