(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{732:function(e,t,r){var content=r(807);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(19).default)("e479621e",content,!0,{sourceMap:!1})},806:function(e,t,r){"use strict";r(732)},807:function(e,t,r){var n=r(18)(!1);n.push([e.i,".user-bot-page .bot-card[data-v-c968feca]{transition:.3s ease;min-height:220px;display:flex;flex-direction:column;justify-content:space-between}.db-path[data-v-c968feca]{font-size:14px;font-weight:500;word-break:break-all}.db-path code[data-v-c968feca]{background-color:#f4f4f4;padding:2px 4px;border-radius:4px;font-size:14px}.description-truncate[data-v-c968feca]{max-height:3.6em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:1.8em}",""]),e.exports=n},838:function(e,t,r){"use strict";r.r(t);var n=r(233),o=r(688),c=r(687),l=r(708),d=r(697),f=r(707),h=r(699),m=r(723),v=r(235),_=r(683),x=r(681),w=r(711),k=r(825),B=(r(36),r(9),r(68),r(11),r(15),r(5),r(16),r(8),r(17),r(85)),O=r(20),y=r(1),F=(r(159),r(86),r(46)),j=r(4);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(y.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var U={name:"UserBotListPage",data:function(){return{botList:[],editDialog:!1,editForm:{index:null,bot:{id:null,name:"",db_path:"",description:""}}}},computed:D({},Object(F.c)({userBots:"manager/userBots"})),mounted:function(){this.init()},methods:D(D({},Object(F.b)({toggleSnackbar:"common/toggleSnackbar",setLoadingForm:"common/setLoadingForm",getManagerUserBots:"manager/getManagerUserBots",updateManagerUserBot:"manager/updateManagerUserBot"})),{},{init:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUserBots();case 2:case"end":return t.stop()}}),t)})))()},fetchUserBots:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.setLoadingForm(!0);case 3:return t.next=5,e.getManagerUserBots();case 5:r=e.exceptionApi_checkApiResult(j.a.API_PATH.MANAGER_USER_BOTS.PATH),e.botList=r?Object(B.a)(e.userBots):[],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.toggleSnackbar({isShow:!0,message:"Không tải được danh sách bot",color:"error"});case 12:return t.prev=12,t.next=15,e.setLoadingForm(!1);case 15:return t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[0,9,12,16]])})))()},updateUserBots:function(e){var t=this;return Object(O.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.setLoadingForm(!0);case 3:return r.next=5,t.updateManagerUserBot(e);case 5:t.exceptionApi_checkApiResult(j.a.API_PATH.MANAGER_USER_BOT_UPDATE.PATH)&&t.toggleSnackbar({isShow:!0,message:"Cập nhật bot thành công",color:"success"}),t.fetchUserBots(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),t.toggleSnackbar({isShow:!0,message:"Cập nhật bot thất bại",color:"error"});case 13:return r.prev=13,r.next=16,t.setLoadingForm(!1);case 16:return r.finish(13);case 17:case"end":return r.stop()}}),r,null,[[0,10,13,17]])})))()},toggleBotSelection:function(e){var t={bot_id:e.id,selected:!e.selected};this.updateUserBots(t)},openEditDialog:function(e){var t=this.botList.findIndex((function(b){return b.id===e.id}));this.editForm=D({index:t},e),this.editDialog=!0},saveBotEdit:function(){if(null!==this.editForm.index){var e={bot_id:this.editForm.id,name:this.editForm.name,db_path:this.editForm.db_path,description:this.editForm.description,selected:this.editForm.selected};this.updateUserBots(e)}this.editDialog=!1}})},P=(r(806),r(40)),component=Object(P.a)(U,(function(){var e=this,t=e._self._c;return t(f.a,{staticClass:"user-bot-page",attrs:{fluid:""}},[t(o.a,{staticClass:"pa-4",attrs:{flat:""}},[t("div",{staticClass:"d-flex justify-space-between align-center mb-4"},[t("span",{staticClass:"text-h6 font-weight-bold"},[e._v("Danh sách Bot")]),e._v(" "),t(n.a,{staticClass:"font-weight-bold",attrs:{color:"primary",height:"40","min-width":"40",elevation:"2",rounded:""},on:{click:e.fetchUserBots}},[t(v.a,{attrs:{left:""}},[e._v("mdi-refresh")]),e._v("\n        Làm mới\n      ")],1)],1),e._v(" "),t(_.a,{attrs:{dense:""}},e._l(e.botList,(function(r){return t(d.a,{key:r.id,attrs:{cols:"12",md:"6",lg:"4"}},[t(o.a,{staticClass:"bot-card mb-3",attrs:{color:r.selected?"#e8f5e9":"",elevation:2}},[t(c.d,{staticClass:"d-flex justify-space-between align-center"},[t("div",{staticClass:"font-weight-bold"},[e._v(e._s(r.name))]),e._v(" "),t(l.a,{attrs:{small:"",color:r.selected?"green":"grey","text-color":"white",label:""}},[e._v("\n              "+e._s(r.selected?"Đã chọn":"Chưa chọn")+"\n            ")])],1),e._v(" "),t(c.b,{staticClass:"db-path"},[e._v("\n            Đường dẫn DB:\n            "),t("code",[e._v(e._s(r.db_path))])]),e._v(" "),t(c.c,{staticClass:"text-body-2 description-truncate"},[e._v("\n            "+e._s(r.description||"Không có mô tả.")+"\n          ")]),e._v(" "),t(c.a,{staticClass:"d-flex justify-end"},[t(n.a,{staticClass:"mr-2",attrs:{small:"",color:"info"},on:{click:function(t){return e.openEditDialog(r)}}},[e._v("Sửa")]),e._v(" "),t(n.a,{attrs:{small:"",color:r.selected?"error":"primary"},on:{click:function(t){return e.toggleBotSelection(r)}}},[e._v("\n              "+e._s(r.selected?"Bỏ chọn":"Chọn sử dụng")+"\n            ")])],1)],1)],1)})),1)],1),e._v(" "),t(h.a,{attrs:{"max-width":"600px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[t(o.a,[t(c.d,{staticClass:"headline"},[e._v("Chỉnh sửa bot")]),e._v(" "),t(c.c,[t(m.a,{ref:"editForm",attrs:{"lazy-validation":""}},[t(w.a,{attrs:{label:"Tên Bot",outlined:"",dense:"",required:""},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}}),e._v(" "),t(w.a,{attrs:{label:"Đường dẫn DB",outlined:"",dense:"",required:""},model:{value:e.editForm.db_path,callback:function(t){e.$set(e.editForm,"db_path",t)},expression:"editForm.db_path"}}),e._v(" "),t(k.a,{attrs:{label:"Mô tả",outlined:"",dense:"",rows:"5"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1)],1),e._v(" "),t(c.a,[t(x.a),e._v(" "),t(n.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.editDialog=!1}}},[e._v("Huỷ")]),e._v(" "),t(n.a,{attrs:{color:"primary"},on:{click:e.saveBotEdit}},[e._v("Lưu")])],1)],1)],1)],1)}),[],!1,null,"c968feca",null);t.default=component.exports}}]);